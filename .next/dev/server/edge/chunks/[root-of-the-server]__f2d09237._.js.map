{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Documents/Projects/menu-app/middleware.ts"],"sourcesContent":["// middleware.ts\nimport { createServerClient, type CookieOptions } from \"@supabase/ssr\";\nimport { NextResponse, type NextRequest } from \"next/server\";\n\nexport async function middleware(request: NextRequest) {\n  let response = NextResponse.next({\n    request: {\n      headers: request.headers,\n    },\n  });\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return request.cookies.get(name)?.value;\n        },\n        set(name: string, value: string, options: CookieOptions) {\n          request.cookies.set({\n            name,\n            value,\n            ...options,\n          });\n          response = NextResponse.next({\n            request: {\n              headers: request.headers,\n            },\n          });\n          response.cookies.set({\n            name,\n            value,\n            ...options,\n          });\n        },\n        remove(name: string, options: CookieOptions) {\n          request.cookies.set({\n            name,\n            value: \"\",\n            ...options,\n          });\n          response = NextResponse.next({\n            request: {\n              headers: request.headers,\n            },\n          });\n          response.cookies.set({\n            name,\n            value: \"\",\n            ...options,\n          });\n        },\n      },\n    }\n  );\n\n  // Verificar si la ruta es protegida (dashboard)\n  if (request.nextUrl.pathname.startsWith(\"/dashboard\")) {\n    const {\n      data: { session },\n    } = await supabase.auth.getSession();\n\n    if (!session) {\n      // Redirigir a login si no hay sesión\n      const redirectUrl = new URL(\"/login\", request.url);\n      return NextResponse.redirect(redirectUrl);\n    }\n  }\n\n  // Si está en login y ya tiene sesión, redirigir a dashboard\n  if (request.nextUrl.pathname === \"/login\") {\n    const {\n      data: { session },\n    } = await supabase.auth.getSession();\n\n    if (session) {\n      const redirectUrl = new URL(\"/dashboard\", request.url);\n      return NextResponse.redirect(redirectUrl);\n    }\n  }\n\n  return response;\n}\n\nexport const config = {\n  matcher: [\"/dashboard/:path*\", \"/login\"],\n};\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;;;;AAChB;AAAA;AACA;AAAA;;;AAEO,eAAe,WAAW,OAAoB;IACnD,IAAI,WAAW,wOAAY,CAAC,IAAI,CAAC;QAC/B,SAAS;YACP,SAAS,QAAQ,OAAO;QAC1B;IACF;IAEA,MAAM,WAAW,IAAA,+OAAkB,sUAGjC;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO;YACpC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAClB;oBACA;oBACA,GAAG,OAAO;gBACZ;gBACA,WAAW,wOAAY,CAAC,IAAI,CAAC;oBAC3B,SAAS;wBACP,SAAS,QAAQ,OAAO;oBAC1B;gBACF;gBACA,SAAS,OAAO,CAAC,GAAG,CAAC;oBACnB;oBACA;oBACA,GAAG,OAAO;gBACZ;YACF;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAClB;oBACA,OAAO;oBACP,GAAG,OAAO;gBACZ;gBACA,WAAW,wOAAY,CAAC,IAAI,CAAC;oBAC3B,SAAS;wBACP,SAAS,QAAQ,OAAO;oBAC1B;gBACF;gBACA,SAAS,OAAO,CAAC,GAAG,CAAC;oBACnB;oBACA,OAAO;oBACP,GAAG,OAAO;gBACZ;YACF;QACF;IACF;IAGF,gDAAgD;IAChD,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,eAAe;QACrD,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;QAElC,IAAI,CAAC,SAAS;YACZ,qCAAqC;YACrC,MAAM,cAAc,IAAI,IAAI,UAAU,QAAQ,GAAG;YACjD,OAAO,wOAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;IAEA,4DAA4D;IAC5D,IAAI,QAAQ,OAAO,CAAC,QAAQ,KAAK,UAAU;QACzC,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;QAElC,IAAI,SAAS;YACX,MAAM,cAAc,IAAI,IAAI,cAAc,QAAQ,GAAG;YACrD,OAAO,wOAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAqB;KAAS;AAC1C"}}]
}